(this["webpackJsonpcapstone-app"]=this["webpackJsonpcapstone-app"]||[]).push([[0],{68:function(e,t,a){},69:function(e,t,a){},80:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(1),n=a.n(r),c=a(10),i=a.n(c),l=a(2),o=(a(68),a(69),function(e){var t={getUpload:"Background",Uploading:"\u2192",Uploaded:"Prediction",Input:"\u2192",Analysis:"Analysis"},a=e.progress,r={color:"#ffffff"},n={color:"#40406B"};return Object(s.jsxs)("div",{className:"header-container",children:[Object(s.jsx)("div",{className:"title-container",children:Object(s.jsx)("h3",{className:"title-text",children:"Facial Analysis + Bias Visualization"})}),Object(s.jsx)("div",{className:"nav-container",children:Object.keys(t).map((function(e){return Object(s.jsx)("h3",{className:"title-labels",style:a===e?r:n,children:t[e]})}))})]})}),d=a(25),j=a(3),u=a.n(j),b=a(5),h=a(26),g=a.n(h),p=a(15),m=a(16),x=new(function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"UploadToServer",value:function(){var e=Object(b.a)(u.a.mark((function e(t,a){var s,r,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new FormData,r=t[0].split(";"),s.append("file",r[2].split(",")[1]),s.append("filename",a),e.next=6,fetch("/api/upload/",{method:"POST",body:s});case 6:return n=e.sent,e.next=9,n.json();case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),O=a(27),f=a.n(O),v=a(19);a(80);function y(){var e=Object(d.a)(["\n        display: block;\n        margin-left: 0px;\n        "]);return y=function(){return e},e}var N=function(e){return Object(s.jsx)("form",{children:Object(s.jsx)(g.a,{withIcon:!1,singleImage:!0,label:"Please upload an image with a single face.",buttonText:"Choose file",onChange:e.onImage,imgExtension:[".jpg",".png",".jpeg"],withPreview:!0,labelStyles:{color:"#ffffff"},fileContainerStyle:{backgroundColor:"var(--primary)",padding:"20px"},buttonStyles:{backgroundColor:"var(--highlight)"}},"image-uploader")})},w=function(e){var t=Object(r.useState)(void 0),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),d=o[0],j=o[1],h=Object(r.useState)(null),g=Object(l.a)(h,2),p=g[0],m=g[1],O=Object(r.useState)(!0),w=Object(l.a)(O,2),S=w[0],F=w[1],D=Object(r.useState)(null),k=Object(l.a)(D,2),P=k[0],U=k[1],A=Object(r.useState)(null),I=Object(l.a)(A,2),T=I[0],C=I[1],G=Object(r.useState)(null),R=Object(l.a)(G,2),Y=R[0],z=R[1],B=function(){var e=Object(b.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{F(!1),m(a)}catch(t){j(t.message)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var t=Object(b.a)(u.a.mark((function t(){var a,s,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setProgress("Uploading"),a=p[0].split(";"),s=a[1].split("=")[1],t.next=5,x.UploadToServer(p,s);case 5:r=t.sent,console.log(r),c("data:image/jpeg;base64,"+r.pp_img),U("data:image/jpeg;base64,"+r.race_ig),C("data:image/jpeg;base64,"+r.gender_ig),z("data:image/jpeg;base64,"+r.age_ig),e.setProgress("Uploaded"),e.setData({race:r.race,gender:r.gender,age:r.age}),e.setPlotData1({title:"Race Prediction",data:r.race_results,colors:["#9900ff","#00ccff"]}),e.setPlotData2({title:"Age Prediction",data:r.age_results,colors:["#ff4aa7","#e04646"]});case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.jsx)("div",{children:function(e){switch(e.progress){case"getUpload":return fetch("/api/clear/"),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"upload-container",children:[Object(s.jsx)(N,{onImage:B,url:n}),Object(s.jsx)("button",{className:"submit",onClick:E,disabled:S,children:"Submit"})]})});case"Uploading":return function(){var e=Object(v.css)(y());return Object(s.jsx)(f.a,{className:"loader",color:"#80D8FF",loading:!0,size:150,css:e})}();case"Uploaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"image-container",children:Object(s.jsx)("img",{className:"pp-img",src:n,alt:"Your Face"})})});case"uploadError":return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"error-message",children:d}),Object(s.jsxs)("div",{className:"upload-container",children:[Object(s.jsx)(N,{onImage:B,url:n}),Object(s.jsx)("button",{className:"submit",onClick:E,disabled:S,children:"Submit"})]})]});case"Analysis":return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"ig-container",children:[Object(s.jsx)("img",{className:"image-container-ig",src:P,alt:"Race Integrated Grad"}),Object(s.jsx)("img",{className:"image-container-ig",src:T,alt:"Gender Integrated Grad"}),Object(s.jsx)("img",{className:"image-container-ig",src:Y,alt:"Age Integrated Grad"})]})});default:return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"image-container",children:Object(s.jsx)("img",{className:"pp-img",src:n,alt:"Your Face"})})})}}(e)})},S=(a(85),function(e){var t=e.progress;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:function(){switch(t){case"getUpload":default:return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"upload-container",children:Object(s.jsx)(w,{setProgress:e.setProgress,setData:e.setData,setPlotData1:e.setPlotData1,setPlotData2:e.setPlotData2,progress:t})})})}}()})})}),F=(a(86),{1:{header:"Model",body:"In order to obtain these results, we trained a model on over 80,000 equally distributed images. We can peek at the inner workings of the model through visualizations."},2:{header:"XAI",body:"The concept of visualizing models in order to ensure confidence is called explainable AI, or XAI. Here, we show two methods of explainable AI: integrated gradients and grad-cam. These visualizations help us confirm that our model is fair and accurate. We'll see why this is important in the next slide."}}),D=function(e){var t=e.progress,a=e.data;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:function(){switch(t){case"getUpload":case"Uploading":return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"background-container",children:[Object(s.jsx)("h3",{children:a.background[1].header}),Object(s.jsx)("p",{children:a.background[1].body}),Object(s.jsx)("h3",{children:a.background[2].header}),Object(s.jsx)("p",{children:a.background[2].body})]})});case"Uploaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"results-container",children:[Object(s.jsx)("h3",{children:Object(s.jsx)("strong",{children:"OUR GUESSES:"})}),Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Race:"})}),Object(s.jsx)("h5",{children:a.race})]}),Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Gender:"})}),Object(s.jsx)("h5",{children:a.gender})]}),Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Age:"})}),Object(s.jsx)("h5",{children:a.age})]})]})});case"Input":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"correction-container"})});case"Analysis":return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"background-container",children:[Object(s.jsx)("h3",{children:F[1].header}),Object(s.jsx)("p",{children:F[1].body}),Object(s.jsx)("h3",{children:F[2].header}),Object(s.jsx)("p",{children:F[2].body})]})});default:return Object(s.jsx)(s.Fragment,{})}}()})})},k={guide:{getUpload:{text:"Hello there! To start, please input an image of a face. Or, read through the background information on the left!",speed:20,eraseDelay:1e7,typingDelay:0,eraseSpeed:30},Uploading:{text:"Loading...this might take a while...",speed:20,eraseDelay:1e3,typingDelay:100,eraseSpeed:30},Uploaded:{text:"Your results are out! Is this what you expected?",speed:20,eraseDelay:1e7,typingDelay:100,eraseSpeed:30},Input:{text:"You got us! Please input the correct information.",speed:20,eraseDelay:1e7,typingDelay:100,eraseSpeed:30},Analysis:{text:"Here is what our model focused on with respect to our predictions.",speed:20,eraseDelay:1e7,typingDelay:100,eraseSpeed:30}}},P=a(28),U=a.n(P),A=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(U.a,{text:k.guide[e.progress].text,cursor:function(e){return Object(s.jsx)("h1",{style:{color:"#ffffff"},children:e})},speed:k.guide[e.progress].speed,eraseSpeed:k.guide[e.progress].eraseSpeed,eraseDelay:k.guide[e.progress].eraseDelay,typingDelay:k.guide[e.progress].typingDelay,displayTextRenderer:function(e){return Object(s.jsx)("h4",{children:e})}},e.progress)})})},I=(a(87),function(e){var t=Object(r.useState)(void 0),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!0),o=Object(l.a)(i,2),d=o[0],j=o[1],h=function(){var t=Object(b.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),"Yes"===n?(e.setProgress("Analysis"),console.log(e.progress)):"No"===n&&e.setProgress("Input");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(e){c(e.target.defaultValue),j(!1)};return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:function(){switch(e.progress){case"getUpload":case"Uploading":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"guide-bounding",children:Object(s.jsx)(A,{className:"guide",progress:e.progress},e.progress)})});case"Uploaded":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"guide-bounding",children:Object(s.jsxs)("div",{className:"guide-split",children:[Object(s.jsx)(A,{className:"guide",progress:e.progress},e.progress),Object(s.jsx)("div",{className:"guide-input",children:Object(s.jsxs)("p",{className:"guide-selections",children:[Object(s.jsx)("input",{className:"options yes",type:"radio",name:"q2",value:"Yes",onChange:g}),"Yes",Object(s.jsx)("input",{className:"options no",type:"radio",name:"q2",value:"No",onChange:g}),"No",Object(s.jsx)("button",{className:"guide-submit submit",onClick:h,disabled:d,children:"submit"})]})})]})})});case"Input":case"Analysis":return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"guide-bounding",children:Object(s.jsx)(A,{className:"guide",progress:e.progress},e.progress)})});default:return Object(s.jsx)(s.Fragment,{})}}()})})}),T=a(29),C=a(32),G=a(6),R=(a(88),20),Y=30,z=30,B=30,E=function(e){Object(T.a)(a,e);var t=Object(C.a)(a);function a(e){var s;return Object(p.a)(this,a),(s=t.call(this,e)).height=200,s.width=300,s.xScale=G.c().range([Y,s.width-R]),s.yScale=G.d().domain([100,0]).range([z,s.height-z-B]),s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.data,t=(e.map((function(e){return e.val})),e.map((function(e){return e.cat}))),a=this.xScale.domain(t),s=this.yScale,r=this.height,n=this.width,c=this.props.plotTitle,i=this.props.colors;console.log(i);var l=G.e("#".concat(this.props.className)),o=l.append("defs").append("linearGradient").attr("id","".concat(this.props.className,"-bg-gradient")).attr("gradientTransform","rotate(90)");o.append("stop").attr("stop-color",i[0]).attr("offset","0%"),o.append("stop").attr("stop-color",i[1]).attr("offset","100%");var d=G.a(this.xScale),j=G.b(this.yScale);l.append("g").attr("class","accuracy-axis").attr("transform","translate(0, ".concat(this.height-z-B,")")).call(d).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),l.append("g").attr("class","accuracy-axis").attr("transform","translate(".concat(Y,", 0)")).call(j),l.selectAll("bars").data(e).enter().append("rect").attr("x",(function(e){return a(e.cat)+a.bandwidth()/4})).attr("y",(function(e){return s(e.val)})).attr("width",a.bandwidth()/2).attr("height",(function(e){return r-z-B-s(e.val)})).attr("fill","url(#".concat(this.props.className,"-bg-gradient)")),l.append("g").append("text").attr("x",n/2).attr("y",z).attr("fill","white").text(c).style("text-anchor","middle")}},{key:"render",value:function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("svg",{id:this.props.className,width:this.width,height:this.height})})}}]),a}(n.a.Component),_={background:{1:{header:"What is this?",body:"Whether it is through self-driving cars, phone facial recognition, or security cameras, automated softwares that analyze our faces have become a pervasive element of our everyday lives. The enigmatic nature of machine learning, especially in relation to facial recognition seems simultaneously terrifying and confusing. But it has the potential to be neither! "},2:{header:"Privacy",body:"Rest assured - none of your data will be stored"}}},W={unbiased:{title:"Unbiased Accuracy (%)",data:[{cat:"Race",val:56},{cat:"Gender",val:91},{cat:"Age",val:66}],colors:["#E323FF","#7517F8"]},biased:{title:"Biased Accuracy (%)",data:[{cat:"Race",val:40},{cat:"Gender",val:80},{cat:"Age",val:50}],colors:["#00FFC7","#00A3FF"]}};var q=function(){var e=Object(r.useState)("getUpload"),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(_),i=Object(l.a)(c,2),d=i[0],j=i[1],u=Object(r.useState)(W.unbiased),b=Object(l.a)(u,2),h=b[0],g=b[1],p=Object(r.useState)(W.biased),m=Object(l.a)(p,2),x=m[0],O=m[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("header",{children:Object(s.jsx)(o,{className:"header",progress:a})}),Object(s.jsxs)("div",{className:"main-container",children:[Object(s.jsxs)("div",{className:"text-container",children:[Object(s.jsx)("div",{className:"info-widget box",children:Object(s.jsx)(D,{data:d,progress:a})}),Object(s.jsxs)("div",{className:"stats-container",children:[Object(s.jsx)("div",{className:"stats-widget1 box",children:Object(s.jsx)("div",{className:"graph-box",children:Object(s.jsx)(E,{className:"bar",data:h.data,plotTitle:h.title,colors:h.colors},h.title)})}),Object(s.jsx)("div",{className:"stats-widget2 box",children:Object(s.jsx)("div",{className:"graph-box",children:Object(s.jsx)(E,{className:"bar2",data:x.data,plotTitle:x.title,colors:x.colors},x.title)})})]})]}),Object(s.jsxs)("div",{className:"interactive-container",children:[Object(s.jsx)("div",{className:"guide-container",children:Object(s.jsx)(I,{progress:a,setProgress:n})}),Object(s.jsx)("div",{className:"image-upload-widget box",children:Object(s.jsx)(S,{className:"image-upload",setData:j,setProgress:n,progress:a,data:d,setPlotData1:g,setPlotData2:O})})]})]})]})};i.a.render(Object(s.jsx)(q,{}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.c822a8eb.chunk.js.map